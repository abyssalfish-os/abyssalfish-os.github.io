<!doctype html><html class=no-js lang="
    zh-cn
  
  ">
<head>
<meta charset=utf-8>
<link rel=preload href=https://abyssalfish-os.github.io/fonts/muli-latin-200.woff2 as=font type=font/woff2 crossorigin>
<link rel=preload href=https://abyssalfish-os.github.io/fonts/muli-latin-400.woff2 as=font type=font/woff2 crossorigin>
<link rel=preload href=https://abyssalfish-os.github.io/fonts/muli-latin-800.woff2 as=font type=font/woff2 crossorigin>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>
流影: 管理服务编译安装
</title><meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=generator content="Hugo 0.109.0">
<meta name=robots content="index, follow">
<link rel=stylesheet href=/output/css/app.min.631706eef190df8129d8f5b57c45caa8c431efd8e4148fbd17b354b607ce316a.css integrity="sha256-YxcG7vGQ34Ep2PW1fEXKqMQx79jkFI+9F7NUtgfOMWo=" crossorigin=anonymous>
<meta name=description content="
        流影管理服务模块ly_server编译安装说明
      
      ">
<script type=text/javascript src=/output/js/app.5a802739f9b2407f0d3a1f84a20731b6705a5a4df051c35686f22bd3aea90731.js crossorigin=anonymous defer></script>
<script async defer src=https://buttons.github.io/buttons.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16>
<link rel=manifest href=/manifest.json>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#0594cb>
<meta name=theme-color content="#ffffff">
<meta property="og:title" content="管理服务编译安装">
<meta property="og:description" content="流影管理服务模块ly_server编译安装说明">
<meta property="og:type" content="article">
<meta property="og:url" content="https://abyssalfish-os.github.io/installation/ly_server/"><meta property="og:image" content="https://abyssalfish-os.github.io/opengraph/gohugoio-card-base-1_huf001e7df4fd9c00c4355abac7d4ca455_242906_filter_5615976097671314364.png"><meta property="article:section" content="installation">
<meta property="article:published_time" content="2022-12-28T00:00:00+08:00">
<meta property="article:modified_time" content="2023-01-07T00:58:17+08:00">
<meta itemprop=name content="管理服务编译安装">
<meta itemprop=description content="流影管理服务模块ly_server编译安装说明"><meta itemprop=datePublished content="2022-12-28T00:00:00+08:00">
<meta itemprop=dateModified content="2023-01-07T00:58:17+08:00">
<meta itemprop=wordCount content="944">
<meta itemprop=keywords content>
</head><body class="ma0 sans-serif bg-primary-color-light
production">
<nav class="bg-primary-color-dark pv4 w-100" role=navigation>
<div class="center flex-ns flex-wrap items-center justify-start mw9">
<h1 class="dim f3 lh-solid ml0-ns mr0 mr4-l mv0 pl3 pl4-ns">
<a href=https://abyssalfish-os.github.io/ class="link white">
流影->FlowShadow
</a>
</h1><ul class="list ma0 pa0 dn dib-l" role=menu>
<li class="f5 dib mr4" role=menuitem>
<a href=/news/ class="dim link light-silver">
新闻&博客
</a>
</li><li class="f5 dib mr4" role=menuitem>
<a href=/documentation/ class="dim link light-silver">
文档
</a>
</li><li class="f5 dib mr4" role=menuitem>
<a href=/demo/ class="dim link light-silver">
Demo演示
</a>
</li><li class="f5 dib mr4" role=menuitem>
<a href=https://gitee.com/organizations/abyssalfish-os/projects class="dim link light-silver">
Gitee
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg>
</span>
</a>
</li><li class="f5 dib mr4" role=menuitem>
<a href=https://github.com/orgs/Abyssal-Fish-Technology/repositories class="dim link light-silver">
GitHub
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg>
</span>
</a>
</li><li class="f5 dib mr4" role=menuitem>
<a href=https://gitter.im/abyssalfish-os/community class="dim link light-silver">
讨论区
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg>
</span>
</a>
</li></ul><div class="db dib-ns pl3"><form id=site-search-form role=search>
<fieldset class="bn ma0 pa0">
<label class=clip for=search-input>Search</label>
<input type=text id=search-input class="needs-js dn bn f5 lh-solid mt3 mt0-ns pl4 pv2 w5 white" placeholder="Welcome to FlowShadow" name=search-input style=background-color:rgba(255,255,255,0)>
</fieldset></form></div></div></nav><main role=main class="content-with-sidebar min-vh-100 pb7 pb0-ns">
<article class="w-100 ph4 pb5 pb6-ns pt1 pt5-ns">
<div class=flex-l>
<div class="order-2 w-100 w-20-l ph5-m ph0-l mb4 sticky">
<aside class="fixed-lTK mw5-l right-0 f6 bl-l b--moon-gray pv4 pv0-ns ph4-l nested-list-reset nested-links nested-copy-line-height">
<p class=b>What's on this Page</p><nav id=TableOfContents>
<ul>
<li><a href=#项目地址>项目地址</a></li><li><a href=#目录结构>目录结构</a></li><li><a href=#环境依赖>环境依赖</a></li><li><a href=#安装依赖>安装依赖</a></li><li><a href=#编译部署>编译部署</a></li><li><a href=#运行配置>运行配置</a></li><li><a href=#定时任务>定时任务</a></li><li><a href=#开源许可>开源许可</a></li><li><a href=#联系方式>联系方式</a></li></ul></nav><div date-pref>
<a href=https://abyssalfish-os.github.io/installation/ly_analyser/ class="dib f6 pl1 hover-bg-light-gray br-100" title="分析引擎编译安装 "><svg class="fill-current" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
</a>
<a href=https://abyssalfish-os.github.io/installation/ly_vis/ class="dib f6 pr1 hover-bg-light-gray br-100" title=可视化交互式分析界面><svg class="fill-current" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
</a>
</div></aside></div><div class="order-1 w-60-l mw7 ph0 ph5-ns mid-gray nested-copy-line-height no-underline nested-links nested-img nested-copy-seperator nested-blockquote mt0-ns" style=flex-grow:1>
<div class="documentation-copy center measure-wide-wd">
<div id=readout class="fixed right-0 bottom-0">
</div><header class="flex-none w-100">
<a href=/categories/installation class="f6 fw8 mb0 link mid-gray dim mr3">
INSTALLATION
</a>
<a href=/categories/compile class="f6 fw8 mb0 link mid-gray dim mr3">
COMPILE
</a>
<h1 class="lh-title mb3 mv0 pt3 primary-color-dark">管理服务编译安装</h1></header><aside class="bt bw1 pt3 mt2 mid-gray b--mid-gray fn w-100">
<div class="f4 fw4 lh-copy">
流影管理服务模块ly_server编译安装说明
</div></aside><div class=prose id=prose>
<p>​ly_server是流影的管理引擎，用于聚合分析引擎产出的威胁事件、数据节点管理、用户管理、配置管理、数据查询等。</p><h2 id=项目地址>项目地址 <a class=header-link href=#%e9%a1%b9%e7%9b%ae%e5%9c%b0%e5%9d%80><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ul>
<li><a href=https://github.com/Abyssal-Fish-Technology/ly_server>Github</a></li><li><a href=https://gitee.com/abyssalfish-os/ly_server>Gitee</a></li></ul><h2 id=目录结构>目录结构 <a class=header-link href=#%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><pre tabindex=0><code>ly_server
├───dependence		-- 依赖环境
├───src
	├───common		-- 数据结构与通用工具函数
	├───lib			-- 工具库函数
	├───server		-- 引擎主体代码
		├......		-- 各API实现
</code></pre><h2 id=环境依赖>环境依赖 <a class=header-link href=#%e7%8e%af%e5%a2%83%e4%be%9d%e8%b5%96><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># 操作系统
</span></span><span class=line><span class=cl>CentOS-7-x86_64-Minimal-2009
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 编译环境
</span></span><span class=line><span class=cl>gcc、gcc-c++、cmake
</span></span><span class=line><span class=cl>bison、flex
</span></span><span class=line><span class=cl>json-c-devel
</span></span><span class=line><span class=cl>boost-devel
</span></span><span class=line><span class=cl>libcurl-devel
</span></span><span class=line><span class=cl>mariadb-server
</span></span><span class=line><span class=cl>mariadb-devel
</span></span><span class=line><span class=cl>httpd、ntp
</span></span><span class=line><span class=cl>cgicc-3.2.16
</span></span><span class=line><span class=cl>cppdb-0.3.1
</span></span><span class=line><span class=cl>protobuf-3.8.0
</span></span></code></pre></div><h2 id=安装依赖>安装依赖 <a class=header-link href=#%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 1. 安装依赖组件</span>
</span></span><span class=line><span class=cl>	yum install gcc gcc-c++ cmake -y
</span></span><span class=line><span class=cl>	yum install bison flex json-c-devel -y
</span></span><span class=line><span class=cl>	yum install ntp -y
</span></span><span class=line><span class=cl>	yum install httpd -y
</span></span><span class=line><span class=cl>	yum install boost-devel -y
</span></span><span class=line><span class=cl>	yum install libcurl-devel -y
</span></span><span class=line><span class=cl>	yum install mariadb-server mariadb-devel -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 编译安装cgicc</span>
</span></span><span class=line><span class=cl>	tar -zxvf cgicc-3.2.16.tar.gz -C ./
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> ./cgicc-3.2.16
</span></span><span class=line><span class=cl>	./config
</span></span><span class=line><span class=cl>	make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 编译安装cppdb</span>
</span></span><span class=line><span class=cl>	tar -jxvf cppdb-0.3.1.tar.bz2 -C ./
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> ./cppdb-0.3.1
</span></span><span class=line><span class=cl>	cmake -DCMAKE_INSTALL_PREFIX<span class=o>=</span>/usr -DLIBDIR<span class=o>=</span>lib64 -DMYSQL_LIB<span class=o>=</span>/usr/lib64/mysql/libmysqlclient.so -DMYSQL_PATH<span class=o>=</span>/usr/include/mysql
</span></span><span class=line><span class=cl>	make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 编译安装protobuf-3.8.0</span>
</span></span><span class=line><span class=cl>	tar -xzvf protobuf-3.8.0.tar.gz
</span></span><span class=line><span class=cl>	./configure
</span></span><span class=line><span class=cl>	make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>	ln -sf /usr/local/lib/libprotobuf.so.19.0.0 /usr/lib64/libprotobuf.so.19
</span></span></code></pre></div><h2 id=编译部署>编译部署 <a class=header-link href=#%e7%bc%96%e8%af%91%e9%83%a8%e7%bd%b2><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 5. 创建目录结构</span>
</span></span><span class=line><span class=cl>   mkdir -p /home/Server
</span></span><span class=line><span class=cl>   ln -s   /home/Server/  /Server
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 6. 编译源代码</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> src
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># 编译common</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> common
</span></span><span class=line><span class=cl>	make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># 编译lib</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> lib
</span></span><span class=line><span class=cl>	make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># 编译server</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> server
</span></span><span class=line><span class=cl>	make <span class=o>&amp;&amp;</span> make install
</span></span></code></pre></div><h2 id=运行配置>运行配置 <a class=header-link href=#%e8%bf%90%e8%a1%8c%e9%85%8d%e7%bd%ae><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 7. 配置语言和时区</span>
</span></span><span class=line><span class=cl>   <span class=nb>export</span> <span class=nv>LANG</span><span class=o>=</span>en_US.UTF-8
</span></span><span class=line><span class=cl>   ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&gt;/dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span>
</span></span><span class=line><span class=cl>   ntpdate cn.pool.ntp.org
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 8. 关闭selinux、开启防火墙端口</span>
</span></span><span class=line><span class=cl>   <span class=c1>#编辑config⽂件</span>
</span></span><span class=line><span class=cl>   vi /etc/selinux/config
</span></span><span class=line><span class=cl>   <span class=c1>#找到配置项</span>
</span></span><span class=line><span class=cl>   <span class=nv>SELINUX</span><span class=o>=</span>enforcing
</span></span><span class=line><span class=cl>   <span class=c1>#修改配置项为</span>
</span></span><span class=line><span class=cl>   <span class=nv>SELINUX</span><span class=o>=</span>disabled
</span></span><span class=line><span class=cl>   <span class=c1>#执⾏命令，即时关闭selinux</span>
</span></span><span class=line><span class=cl>   setenforce <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	 systemctl restart firewalld
</span></span><span class=line><span class=cl>	 firewall-cmd --zone<span class=o>=</span>public --add-port<span class=o>=</span>18080/tcp --permanent
</span></span><span class=line><span class=cl>	 firewall-cmd --reload
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 9. 配置httpd</span>
</span></span><span class=line><span class=cl>   <span class=c1># 编辑/etc/httpd/conf.d/server.conf</span>
</span></span><span class=line><span class=cl>   Listen <span class=m>18080</span>
</span></span><span class=line><span class=cl>   &lt;VirtualHost :18080&gt;
</span></span><span class=line><span class=cl>      DocumentRoot <span class=s2>&#34;/Server/www&#34;</span>
</span></span><span class=line><span class=cl>      AddDefaultCharset utf-8
</span></span><span class=line><span class=cl>      &lt;Directory <span class=s2>&#34;/Server/www&#34;</span>&gt;
</span></span><span class=line><span class=cl>          Options FollowSymLinks Includes
</span></span><span class=line><span class=cl>          XBitHack on
</span></span><span class=line><span class=cl>          AllowOverride None
</span></span><span class=line><span class=cl>          Order allow,deny
</span></span><span class=line><span class=cl>          Allow from all
</span></span><span class=line><span class=cl>          Require all granted
</span></span><span class=line><span class=cl>      &lt;/Directory&gt;
</span></span><span class=line><span class=cl>      Alias /d/ <span class=s2>&#34;/Server/www/d/&#34;</span>
</span></span><span class=line><span class=cl>      &lt;Directory <span class=s2>&#34;/Server/www/d/&#34;</span>&gt;
</span></span><span class=line><span class=cl>          Options ExecCGI FollowSymLinks
</span></span><span class=line><span class=cl>          SetHandler cgi-script
</span></span><span class=line><span class=cl>          AllowOverride None
</span></span><span class=line><span class=cl>          Order allow,deny
</span></span><span class=line><span class=cl>          Allow from all
</span></span><span class=line><span class=cl>          Require all granted
</span></span><span class=line><span class=cl>          RewriteEngine On
</span></span><span class=line><span class=cl>          RewriteCond %<span class=o>{</span>REQUEST_FILENAME<span class=o>}</span> !auth$
</span></span><span class=line><span class=cl>          RewriteRule ^<span class=o>(</span>.<span class=o>)</span>$ auth?auth_target<span class=o>=</span><span class=nv>$1</span> <span class=o>[</span>QSA,PT,L<span class=o>]</span>
</span></span><span class=line><span class=cl>      &lt;/Directory&gt;
</span></span><span class=line><span class=cl>   &lt;/VirtualHost&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=c1>#重启httpd</span>
</span></span><span class=line><span class=cl>   systemctl restart httpd
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 10. 配置mariadb</span>
</span></span><span class=line><span class=cl>    mkdir -p /Server/etc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>#编辑/Server/etc/gl.server.cnf⽂件</span>
</span></span><span class=line><span class=cl>    vi	/Server/etc/gl.server.cnf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>#添加如下内容</span>
</span></span><span class=line><span class=cl>    <span class=o>[</span>gl.server<span class=o>]</span>
</span></span><span class=line><span class=cl>    default-character-set<span class=o>=</span>utf8
</span></span><span class=line><span class=cl>    <span class=nv>user</span><span class=o>=</span>root
</span></span><span class=line><span class=cl>    <span class=nv>database</span><span class=o>=</span>server
</span></span><span class=line><span class=cl>    <span class=nv>passwd</span><span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    cp /Server/etc/gl.server.cnf /etc/my.cnf.d/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=c1>#启动数据库</span>
</span></span><span class=line><span class=cl>		systemctl	start	mariadb
</span></span><span class=line><span class=cl>		<span class=c1>#初始化数据库，根据提示操作即可（⽆登录密码，拒绝⾮本地登录）</span>
</span></span><span class=line><span class=cl>		mysql_secure_installation
</span></span><span class=line><span class=cl>		<span class=c1>#登陆本地数据库</span>
</span></span><span class=line><span class=cl>		mysql  -uroot
</span></span><span class=line><span class=cl>		<span class=c1>#新建数据库server</span>
</span></span><span class=line><span class=cl>		create	database	server<span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>#选择server数据库</span>
</span></span><span class=line><span class=cl>		use	server
</span></span><span class=line><span class=cl>		<span class=c1>#导⼊数据</span>
</span></span><span class=line><span class=cl>		<span class=nb>source</span>	/root/db.server.v1.0.0.clean.sql
</span></span><span class=line><span class=cl>		<span class=c1>#导⼊成功后，退出</span>
</span></span><span class=line><span class=cl>		<span class=nb>exit</span>
</span></span><span class=line><span class=cl>		<span class=c1>#重启mariadb</span>
</span></span><span class=line><span class=cl>		systemctl  restart  mariadb
</span></span></code></pre></div><h2 id=定时任务>定时任务 <a class=header-link href=#%e5%ae%9a%e6%97%b6%e4%bb%bb%e5%8a%a1><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># 11. 创建定时任务</span>
</span></span><span class=line><span class=cl>    编辑/var/spool/cron/root，写入内容：
</span></span><span class=line><span class=cl>    */5 * * * * /Server/bin/config_pusher
</span></span><span class=line><span class=cl>    */5 * * * * /Server/bin/gen_event
</span></span></code></pre></div><h2 id=开源许可>开源许可 <a class=header-link href=#%e5%bc%80%e6%ba%90%e8%ae%b8%e5%8f%af><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ul>
<li>GNU GENERAL PUBLIC LICENSE Version 3</li></ul><h2 id=联系方式>联系方式 <a class=header-link href=#%e8%81%94%e7%b3%bb%e6%96%b9%e5%bc%8f><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>如果在开发、部署、使用的过程中遇到任何问题，或者技术讨论、产品咨询、商务合作等，都欢迎前来联系我们！</p><p>联系邮箱：<a href=mailto:opensource@abyssalfish.com.cn>opensource@abyssalfish.com.cn</a></p></div></div></div><div class="order-0 w-20 dn db-l">
<nav role=navigation>
<ul class="list pa0 nl2">
<li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
<a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.about>关于流影</a>
<ul class="about desktopmenu animated fadeIn list pl0 bg-light-gray dn">
<li class="f6 fw4">
<a href=/about/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
概览
</a>
</li><li class="f6 fw4">
<a href=/about/what-is-liuying/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
简介
</a>
</li><li class="f6 fw4">
<a href=/about/structure/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
架构
</a>
</li><li class="f6 fw4">
<a href=/about/license/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
开源协议
</a>
</li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
<a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.getting-started>快速开始</a>
<ul class="getting-started desktopmenu animated fadeIn list pl0 bg-light-gray dn">
<li class="f6 fw4">
<a href=/getting-started/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
入门概览
</a>
</li><li class="f6 fw4">
<a href=/getting-started/quick-start/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
快速上手
</a>
</li><li class="f6 fw4">
<a href=/getting-started/usage/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
界面使用
</a>
</li><li class="f6 fw4">
<a href=/getting-started/deploy-required/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
部署环境
</a>
</li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
<a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 primary-color" data-target=.installation>编译安装</a>
<ul class="installation desktopmenu animated fadeIn list pl0 bg-light-gray db">
<li class="f6 fw4">
<a href=/installation/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
编译安装概览
</a>
</li><li class="f6 fw4">
<a href=/installation/ly_probe/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
流量探针
</a>
</li><li class="f6 fw4">
<a href=/installation/ly_analyser/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
分析引擎
</a>
</li><li class="f6 fw4">
<a href=/installation/ly_server/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 primary-color">
管理引擎
</a>
</li><li class="f6 fw4">
<a href=/installation/ly_vis/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
可视化交互界面
</a>
</li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
<a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.user-manual>用户手册</a>
<ul class="user-manual desktopmenu animated fadeIn list pl0 bg-light-gray dn">
<li class="f6 fw4">
<a href=/user-manual/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
手册概览
</a>
</li><li class="f6 fw4">
<a href=/user-manual/login/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
登录系统
</a>
</li><li class="f6 fw4">
<a href=/user-manual/basic-setting/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
基本配置
</a>
</li><li class="f6 fw4">
<a href=/user-manual/zonglan/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
态势总览
</a>
</li><li class="f6 fw4">
<a href=/user-manual/shijian/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
事件告警
</a>
</li><li class="f6 fw4">
<a href=/user-manual/yanpan/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
分析研判
</a>
</li><li class="f6 fw4">
<a href=/user-manual/zhuizong/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
追踪功能
</a>
</li><li class="f6 fw4">
<a href=/user-manual/peizhi/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
系统配置
</a>
</li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
<a href=/demo/ class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.demo>演示Demo</a>
</li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray">
<a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.contribute>欢迎贡献</a>
<ul class="contribute desktopmenu animated fadeIn list pl0 bg-light-gray dn">
<li class="f6 fw4">
<a href=/contribute/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
参与贡献
</a>
</li><li class="f6 fw4">
<a href=/contribute/development/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
参与开发
</a>
</li><li class="f6 fw4">
<a href=/contribute/documentation/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">
完善文档
</a>
</li></ul></li></ul></nav></div></div></article><div class="w-100 bg-light-gray">
<div class="mw7 pa4 center nested-lh-copy lh-copy">
<h6 class="f6 dark-gray mb2">
Last updated: January 7, 2023: <a class="hide-child link primary-color" href=https://github.com/abyssalfish-os/abyssalfish-os.github.io/commit/169ab8209f8669c9c099b99b25f900aa8362e6a9>init (169ab82)</a>
</h6><a href=https://github.com/abyssalfish-os/abyssalfish-os.github.io/edit/master/content/installation/ly_server.md class="f6 ph3 pv1 br2 dib tc ttu mv3 bg-primary-color white hover-bg-green link">Improve this page</a>
</div></div></main><footer class="bg-primary-color-dark ph4-ns pt4 relative w-100" role=contentinfo>
<div class="center flex-ns flex-wrap justify-between mw9 w-90">
<div class="center pb3 pt4">
<div class="b f3 light-gray mb3 nested-links tc">
流影由 <a href=https://github.com/orgs/Abyssal-Fish-Technology class=link>深海鱼（北京）科技有限公司 </a>发起开源和维护，欢迎参与<br>
</div><ul class="center f6 list ma0 mv4 pa0 tc">
<li class="dib mr3"><a href=https://github.com/Abyssal-Fish-Technology/ly_vis class="dim link light-gray pv2">可视化交互分析(ly_vis)</a></li><li class="dib mr3"><a href=https://github.com/Abyssal-Fish-Technology/ly_server class="dim link light-gray pv2">管理引擎(ly_server)</a></li><li class=dib><a href=https://github.com/Abyssal-Fish-Technology/ly_analyser class="dim link light-gray pv2">分析引擎(ly_analyser)</a></li><li class=dib><a href=https://github.com/Abyssal-Fish-Technology/ly_probe class="dim link light-gray pv2"> &nbsp;&nbsp;&nbsp;&nbsp;流量探针(ly_probe)</a></li></ul><ul class="center f6 list ma0 mv3 pa0 tc"><li class="dib mr3"><a href=https://github.com/abyssalfish-os/liuying/issues/new class="dim link light-gray pv2">到 Github 发起 Issue</a></li><li class=dib><a href=https://gitter.im/abyssalfish-os/community class="dim link light-gray pv2">来 Gitter 沟通留言</a></li></ul></div></div><div class="bg-primary-color-dark bottom-0 left-0 right-0 dn-l fixed pb3 ph3 pt3 z-2"><div class="globalmenu mobilemenu pb1 dn">
<ul class="list hidden dib ph0 scrolling-touch tc">
<li class="tl dib ma0 hover-bg-black w-100">
<a href=/news/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">
新闻&博客
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=/documentation/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">
文档
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=/demo/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">
Demo演示
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=https://gitee.com/organizations/abyssalfish-os/projects class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">
Gitee
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=https://github.com/orgs/Abyssal-Fish-Technology/repositories class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">
GitHub
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=https://gitter.im/abyssalfish-os/community class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">
讨论区
</a>
</li></ul></div><div class="docsmenu mobilemenu pb1 dn">
<ul class="list dib ph0 scrolling-touch tc">
<li class="tl dib ma0 hover-bg-black w-100">
<a href=/about/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">
关于流影
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=/getting-started/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">
快速开始
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=/installation/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">
编译安装
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=/user-manual/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">
用户手册
</a>
</li><li class="tl dib ma0 hover-bg-black w-100">
<a href=/demo/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">
演示Demo
</a>
</li><li class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray">
<a href=/contribute/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">
欢迎贡献
</a>
</li></ul></div><div class="flex dn-l justify-between">
<button class="js-toggle flex-auto dib dn-l f6 tc db ph3 pv2 link mr2 white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=.globalmenu>Menu</button>
<button class="js-toggle flex-auto dib dn-l f6 tc db ph3 pv2 link white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=.docsmenu>Docs Menu</button>
</div></div></footer></body></html>